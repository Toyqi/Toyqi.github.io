<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Toyqi的程序世界</title>
    <meta name="description" content="">
    <meta name="author" content="Toyqi">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="../theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="../theme/bootstrap.min.css" rel="stylesheet">
    <link href="../theme/bootstrap.min.responsive.css" rel="stylesheet">
    <link href="../theme/local.css" rel="stylesheet">
    <link href="../theme/pygments.css" rel="stylesheet">

</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
    <div class="container">

         <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
         </a>

        <a class="brand" href="..">Toyqi的程序世界</a>

        <div class="nav-collapse">
        <ul class="nav">
                    
                            <li><a href="../pages/about.html">About</a></li>
                        </ul>
        </div>
        
    </div>
    </div>
</div>

<div class="container">
    <div class="content">
    <div class="row">

        <div class="span9">
                

        


    <div class='article'>
        <div class="content-title">
            <a href="../pages/2013/09/10/git_guide.html"><h1>git - 简易指南</h1></a>
            2013-09-10

by <a class="url fn" href="../author/toyqi.html">Toyqi</a>
 


 
        </div>
        
        <div><h2>安装</h2>
<hr />
<ul>
<li><a href="http://code.google.com/p/git-osx-installer/downloads/list?can=3">下载git OSX版</a></li>
<li><a href="http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git">下载git Linux版</a></li>
<li><a href="http://code.google.com/p/msysgit/downloads/list?can=3">下载git Windows版</a></li>
</ul>
<h2>创建新仓库</h2>
<hr />
<p>创建新文件夹，打开，执行命令</p>
<div class="highlight"><pre>    <span class="n">git</span> <span class="n">init</span>
</pre></div>


<p>以创建新的git仓库。</p>
<h2>检出仓库</h2>
<p>执行如下命令创建一个本地仓库的克隆版本：</p>
<div class="highlight"><pre>    <span class="n">git</span> <span class="n">clone</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">repository</span>
</pre></div>


<p>如果是远端服务器上的仓库，命令将是这个样子：</p>
<div class="highlight"><pre>    <span class="n">git</span> <span class="n">clone</span> <span class="n">username</span><span class="err">@</span><span class="n">host</span><span class="o">:/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">repository</span>
</pre></div>


<h2>工作流</h2>
<hr />
<p>你的本地仓库由git维护的三棵"树"组成。第一个是你的__工作目录__,它持有实际文件；第二个是__缓存区(Index)<strong>，它性格缓存区域，临时保存你的改动；最后是__HEAD</strong>，指向你最近一次提交后的结果。</p>
<h2>添加与提交</h2>
<p>你可以计划改动（把它们添加到缓存区），使用如下命令：</p>
<div class="highlight"><pre>    <span class="nx">git</span> <span class="nb">add</span> <span class="o">&lt;</span><span class="nb">filename</span><span class="o">&gt;</span>
        <span class="nx">git</span> <span class="nb">add</span> <span class="o">*</span>
</pre></div>


<p>这是git基本功做流程的第一步；使用如下命令以实际提交改动：</p>
<div class="highlight"><pre>    <span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="err">“代码提交信息”</span>
</pre></div>


<p>现在你的改动已经提交到HEAD，但是还没到你的远端仓库。</p>
<h2>推送改动</h2>
<hr />
<p>你的改动现在已经在本地仓库的__HEAD__中了。执行如下命令旧爱那个改动提交到远端仓库：</p>
<div class="highlight"><pre>    <span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="n">master</span>
</pre></div>


<p>可以把master换成你想要推送的任何分支。</p>
<p>如果你还没有克隆现有仓库，并与将你的仓库连接到某个远程服务器，可以使用如下命令：</p>
<div class="highlight"><pre>    <span class="nx">git</span> <span class="nx">remote</span> <span class="nb">add</span> <span class="nx">origin</span> <span class="o">&lt;</span><span class="nx">server</span><span class="o">&gt;</span>
</pre></div>


<p>如此你就能够将你的改动推送到所添加的服务器上去了。</p>
<h2>分支</h2>
<hr />
<p>分支是用来将特性开发绝缘开来的。在你创建仓库的时候，master 是“默认的”。在其他分支上进行开发，完成后再将它们合并到主分支上。
创建一个叫做“feature_x”的分支，并切换过去：</p>
<div class="highlight"><pre>    <span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="n">feature_x</span>
</pre></div>


<p>切换回主分支：</p>
<div class="highlight"><pre>    <span class="n">git</span> <span class="n">checkout</span> <span class="n">master</span>
</pre></div>


<p>再把新建的分支删掉：</p>
<div class="highlight"><pre>    <span class="n">git</span> <span class="n">branch</span> <span class="o">-</span><span class="n">d</span> <span class="n">feature_x</span>
</pre></div>


<p>除非你将分支推送到远端仓库，不然该分支就是 不为他人所见的：</p>
<div class="highlight"><pre>    <span class="nx">git</span> <span class="nb">push</span> <span class="nx">origin</span> <span class="o">&lt;</span><span class="nx">branch</span><span class="o">&gt;</span>
</pre></div>


<h2>更新与合并</h2>
<hr />
<p>要更新你的本地仓库至最新改动，执行：</p>
<div class="highlight"><pre>    <span class="n">git</span> <span class="n">pull</span>
</pre></div>


<p>以在你的工作目录中 获取（fetch） 并 合并（merge） 远端的改动。
要合并其他分支到你的当前分支（例如 master），执行：</p>
<div class="highlight"><pre>    <span class="nx">git</span> <span class="nb">merge</span> <span class="o">&lt;</span><span class="nx">branch</span><span class="o">&gt;</span>
</pre></div>


<p>两种情况下，git 都会尝试去自动合并改动。不幸的是，自动合并并非次次都能成功，并可能导致 冲突（conflicts）。 这时候就需要你修改这些文件来人肉合并这些 冲突（conflicts） 了。改完之后，你需要执行如下命令以将它们标记为合并成功：</p>
<div class="highlight"><pre>    <span class="nx">git</span> <span class="nb">add</span> <span class="o">&lt;</span><span class="nb">filename</span><span class="o">&gt;</span>
</pre></div>


<p>在合并改动之前，也可以使用如下命令查看：</p>
<div class="highlight"><pre>    <span class="nx">git</span> <span class="nx">diff</span> <span class="o">&lt;</span><span class="nx">source_branch</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nx">target_branch</span><span class="o">&gt;</span>
</pre></div>


<h2>标签</h2>
<hr />
<p>在软件发布时创建标签，是被推荐的。这是个旧有概念，在 SVN 中也有。可以执行如下命令以创建一个叫做 1.0.0 的标签：</p>
<div class="highlight"><pre>    <span class="n">git</span> <span class="n">tag</span> <span class="mf">1.0.0</span> <span class="mi">1</span><span class="n">b2e1d63ff</span>
</pre></div>


<p>1b2e1d63ff 是你想要标记的提交 ID 的前 10 位字符。使用如下命令获取提交 ID：</p>
<div class="highlight"><pre>    <span class="n">git</span> <span class="n">log</span>
</pre></div>


<p>你也可以用该提交 ID 的少一些的前几位，只要它是唯一的。</p>
<h2>替换本地改动</h2>
<hr />
<p>假如你做错事（自然，这是不可能的），你可以使用如下命令替换掉本地改动：</p>
<div class="highlight"><pre>    <span class="nx">git</span> <span class="nx">checkout</span> <span class="o">--</span> <span class="o">&lt;</span><span class="nb">filename</span><span class="o">&gt;</span>
</pre></div>


<p>此命令会使用 HEAD 中的最新内容替换掉你的工作目录中的文件。已添加到缓存区的改动，以及新文件，都不受影响。</p>
<p>假如你想要丢弃你所有的本地改动与提交，可以到服务器上获取最新的版本并将你本地主分支指向到它：</p>
<div class="highlight"><pre>    <span class="n">git</span> <span class="n">fetch</span> <span class="n">origin</span>
    <span class="n">git</span> <span class="n">reset</span> <span class="o">--</span><span class="n">hard</span> <span class="n">origin</span><span class="o">/</span><span class="n">master</span>
</pre></div>


<h2>有用的贴士</h2>
<hr />
<p>内建的图形化 git：</p>
<div class="highlight"><pre>    <span class="n">gitk</span>
</pre></div>


<p>彩色的 git 输出：</p>
<div class="highlight"><pre>    <span class="n">git</span> <span class="n">config</span> <span class="n">color</span><span class="p">.</span><span class="n">ui</span> <span class="nb">true</span>
</pre></div>


<p>显示历史记录时，只显示一行注释信息：</p>
<div class="highlight"><pre>    <span class="n">git</span> <span class="n">config</span> <span class="n">format</span><span class="p">.</span><span class="n">pretty</span> <span class="n">oneline</span>
</pre></div>


<p>交互地添加文件至缓存区：</p>
<div class="highlight"><pre>    <span class="n">git</span> <span class="n">add</span> <span class="o">-</span><span class="n">i</span>
</pre></div>


<h2>链接与资源</h2>
<h3>图形化界面</h3>
<ul>
<li><a href="http://www.git-tower.com/">Tower (OSX)</a></li>
<li><a href="https://itunes.apple.com/cn/app/id403388357?mt=12">GitBox (OSX)</a></li>
<li><a href="http://www.sourcetreeapp.com/">Source Tree (OSX, free)</a></li>
<li><a href="http://mac.github.com/">GitHub for Mac (OSX, free)</a></li>
<li><a href="http://gitx.laullon.com/">GitX (L) (OSX, open source)</a></li>
</ul>
<h3>指南与手册</h3>
<ul>
<li><a href="http://progit.org/book/">专业git</a></li>
<li><a href="https://help.github.com/">GitHub Help</a></li>
<li><a href="http://book.git-scm.com/">Git 社区参考书</a></li>
<li><a href="http://marklodato.github.io/visual-git-guide/index-en.html">图形化 Git 指南</a></li>
</ul>
<p>Enjoy it.</p></div>
        <hr />
    </div>
		
            <div class="pagination">
<ul>
    <li class="prev disabled"><a href="#">&larr; Previous</a></li>

    <li class="active"><a href="../tag/git.html">1</a></li>

    <li class="next disabled"><a href="#">&rarr; Next</a></li>

</ul>
</div>    
 
  
        </div>
        
        <div class="span3">

            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Site
                </li>
            
                <li><a href="../archives.html">Archives</a>
                <li><a href="../tags.html">Tags</a>
                <li><a href="http://toyqi.github.io/" rel="alternate">Atom feed</a></li>
                                <li><a href="http://toyqi.github.io/feeds/all.rss.xml" rel="alternate">RSS feed</a></li>
                            </ul>
            </div>


                        <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Categories
                </li>
                
                                <li><a href="../category/life.html">Life</a></li>
                                <li><a href="../category/tech.html">Tech</a></li>
                                   
            </ul>
            </div>
            

                        <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Links
                </li>
            
                            <li><a href="https://www.google.com/ncr">Google</a></li>
                            <li><a href="http://python.org/">Python</a></li>
                            <li><a href="http://docs.getpelican.com/">Pelican</a></li>
                        </ul>
            </div>
            

                        <div class="social">
            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Social
                </li>
           
                                <li><a href="https://github.com/toyqi">Github</a></li>
                                <li><a href="http://weibo.com/wqibyr">微博</a></li>
                                <li><a href="http://www.douban.com/people/Toyqi/">豆瓣</a></li>
                            </ul>
            </div>
            </div>
            
        </div>  
    </div>     </div> 
<footer>
<br />
<p><a href="..">Toyqi的程序世界</a> &copy; Toyqi 2012</p>
</footer>

</div> <!-- /container -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-collapse.js"></script>
<script>var _gaq=[['_setAccount','UA-43842699-1'],['_trackPageview']];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src='//www.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'))</script>
<a href="https://github.com/toyqi"><img style="position: absolute; top: 40px; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub" /></a>
 
</body>
</html>